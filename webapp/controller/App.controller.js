sap.ui.define(
  [
    "./BaseController",
    "sap/ui/model/json/JSONModel",
  ],
  function (BaseController, JSONModel) {
    "use strict";

    return BaseController.extend("zmmvpi01.app.z20231228mmvpi01.controller.App", {
      /* =========================================================== */
      /* =========================================================== */
      /* =========================================================== */
      /* =========================================================== */
      /* =========================================================== */
      /* =========================================================== */
      /* =========================================================== */
      /* =========================================================== */
      /* =========================================================== */
      /* Local Constants		                                        */
      /* =========================================================== */


      APP_VIEW_MODEL: "appView",












      /* =========================================================== */
      /* =========================================================== */
      /* =========================================================== */
      /* =========================================================== */
      /* =========================================================== */
      /* =========================================================== */
      /* =========================================================== */
      /* =========================================================== */
      /* =========================================================== */
      /* =========================================================== */
      /* =========================================================== */
      /* =========================================================== */
      /* lifecycle methods                                           */
      /* =========================================================== */
      onInit: function () {
        this._oComponent = this.getOwnerComponent();

        let oViewModel = new JSONModel({
          busy: true,
          delay: 0,
          layout: "OneColumn",
          previousLayout: "",
          actionButtonsInfo: {
            midColumn: {
              fullScreen: false
            }
          }
        });
        this.setModel(oViewModel, this.getConstantBase().getConstants().APP_VIEW_MODEL);



        // apply content density mode to root view
        this.getView().addStyleClass(this.getOwnerComponent().getContentDensityClass());
        this.getOwnerComponent().getModel().metadataLoaded().then(function () {
          this._getInitialData();
        }.bind(this));
      },
      /* =========================================================== */
      /* =========================================================== */
      /* =========================================================== */
      /* =========================================================== */
      /* =========================================================== */
      /* =========================================================== */
      /* =========================================================== */
      /* =========================================================== */
      /* =========================================================== */
      /* =========================================================== */
      /* =========================================================== */
      /* =========================================================== */
      /* event handlers                                              */
      /* =========================================================== */






      /* =========================================================== */
      /* =========================================================== */
      /* =========================================================== */
      /* =========================================================== */
      /* =========================================================== */
      /* =========================================================== */
      /* =========================================================== */
      /* =========================================================== */
      /* =========================================================== */
      /* =========================================================== */
      /* =========================================================== */
      /* =========================================================== */
      /* =========================================================== */
      /* begin: CORE internal methods                                */
      /* =========================================================== */









      /* =========================================================== */
      /* =========================================================== */
      /* =========================================================== */
      /* =========================================================== */
      /* =========================================================== */
      /* =========================================================== */
      /* =========================================================== */
      /* =========================================================== */
      /* =========================================================== */
      /* =========================================================== */
      /* =========================================================== */
      /* =========================================================== */
      /* =========================================================== */
      /* begin: internal methods                                     */
      /* =========================================================== */
      _getInitialData: function () {
        this.getCallToBackendBase().callInfoUser(this);
        this.getCallToBackendBase().callStatusName(this);     
        // this.getCallToBackendBase().callReasonRequestList(this);     
        Promise.all([
            this._oComponent._PromiseInfoUser,
            this._oComponent._PromiseStatusName,      
          //  this._oComponent._PromiseReasonRequestList      
        ]).then(function (aPromise) {
       
            this.getModel(this.getConstantBase().getConstants().GLOBAL_MODEL_USER_INFO).setData(aPromise[0].results[0]);     
            this.getModel(this.getConstantBase().getConstants().GLOBAL_MODEL_STATUS_NAME).setData(aPromise[1]);     

          this.getOwnerComponent()._fnResolveDataLoadedInit();
        }.bind(this)).catch(async function (msg) {
          await this.messageBoxError(this.getMessagesBase().findFirstErrorMessage(this));
      
          this.getModel(this.getConstantBase().getConstants().GLOBAL_MODEL_USER_INFO).setProperty("/bEnable", false);
          // await this.messageBoxError(msg);
        }.bind(this));

      },



      /* =========================================================== */
      /* =========================================================== */
      /* =========================================================== */
      /* =========================================================== */
      /* =========================================================== */
      /* =========================================================== */
      /* =========================================================== */
      /* =========================================================== */
      /* =========================================================== */
      /* =========================================================== */
      /* =========================================================== */
      /* begin: Fragments                                            */
      /* =========================================================== */
      /* =========================================================== */





      /* =========================================================== */
      /* =========================================================== */
      /* =========================================================== */
      /* =========================================================== */
      /* =========================================================== */
      /* =========================================================== */
      /* =========================================================== */
      /* =========================================================== */
      /* =========================================================== */
      /* =========================================================== */
      /* =========================================================== */
      /* =========================================================== */
      /* =========================================================== */
      /* =========================================================== */
      /* begin: Call to backendu                                     */
      /* =========================================================== */
    });
  }
);
