<mvc:View
    xmlns:semantic="sap.f.semantic"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:f2="sap.f"
    xmlns:smartFilterBar="sap.ui.comp.smartfilterbar"
    xmlns:smartTable="sap.ui.comp.smarttable"
    xmlns:smartVariantManagement="sap.ui.comp.smartvariants"
    xmlns:core="sap.ui.core"
    xmlns:mc="sap.ui.comp.smartmicrochart"
    xmlns:tnt="sap.tnt"
    xmlns:form="sap.ui.layout.form"
    controllerName="zmmvpi01.app.z20231228mmvpi01.controller.CreateVendorInvoice"
    displayBlock="true"
    xmlns="sap.m"
    xmlns:upload="sap.m.upload"
>
    <semantic:SemanticPage
        id="createVendorInvoicePage"
        busy="{createVendorInvoiceViewModel>/busy}"
        busyIndicatorDelay="0"
        showFooter="true"
    >
        <semantic:titleHeading>
            <Title
                text="{i18n>newInvoice}"
                level="H2"
            />
        </semantic:titleHeading>
        <semantic:titleExpandedContent>
            <!-- <Toolbar width="auto" /> -->
        </semantic:titleExpandedContent>
        <semantic:headerContent />
        <!--Semantic ShareMenu Buttons-->
        <semantic:sendEmailAction>
            <!-- <semantic:SendEmailAction id="shareEmail" press=".onSendEmailPress"/> -->
        </semantic:sendEmailAction>

        <semantic:closeAction>
            <semantic:CloseAction
                id="closeColumn"
                press=".onCloseCreateVendorInvoicePress"
            />
        </semantic:closeAction>
        <semantic:content>
            <VBox height="100%">
            
                <upload:UploadSet
                    id="createUploadSetAttachment"
                    beforeItemAdded=".onBeforeItemAdded"
                    afterItemAdded=".onAfterItemAdded"
                    beforeItemEdited=".onBeforeItemEdited"
                    beforeItemRemoved=".onBeforeItemRemove"
                    beforeUploadStarts=".onBeforeUploadStarts"
                    uploadCompleted=".onUploadCompleted"
                    beforeUploadTermination=".onBeforeUploadTermination"
                    fileNameLengthExceeded=".onFileNameLengthExceeded"
                    fileSizeExceeded=".onFileSizeExceeded"
                    fileTypeMismatch=".onFileTypeMismatch"
                    instantUpload="false"
                    showIcons="true"
                    uploadEnabled="{globalModelUserInfo>/editallowed}"
                    terminationEnabled="true"
                    fileTypes="pdf"
                    maxFileNameLength="70"
                    maxFileSize="2000"
                    mediaTypes="application/pdf"
                    items="{path: 'invoiceAttachModel>/results', templateShareable: false}"
                    incompleteItems="{path: 'invoiceAttachInCompleteModel>/results', templateShareable: false}"
                    uploadUrl="/"

                >
                    <upload:toolbar>
                        <OverflowToolbar>
                            <Title text="{i18n>invoicePDFAttachmentOnly1Attachment}" />
                            <ToolbarSpacer />

                        </OverflowToolbar>
                    </upload:toolbar>
                    <upload:incompleteItems>
                        <upload:UploadSetItem
                            fileName="{invoiceAttachInCompleteModel>filename}"
                            mediaType="{invoiceAttachInCompleteModel>mediaType}"
                            url="{invoiceAttachInCompleteModel>AttachURL}"
                            uploadState="{invoiceAttachInCompleteModel>UploadState}"
                            removePressed=".onRemoveAttachmentPressed"
                            openPressed=".onOpenAttachmentPressed"
                            visibleRemove="true"
                            visibleEdit="false"
                        />
                    </upload:incompleteItems>
                    <upload:items>
                        <upload:UploadSetItem
                            fileName="{invoiceAttachModel>Filename}"
                            mediaType="{invoiceAttachModel>Mimetype}"
                            url="{invoiceAttachModel>AttachURL}"
                            uploadState="{invoiceAttachModel>UploadState}"
                            removePressed=".onRemoveAttachmentPressed"
                            openPressed=".onOpenAttachmentPressed"
                            visibleRemove="true"
                            visibleEdit="false"
                        />
                    </upload:items>
                </upload:UploadSet>
                    <TextArea class="sapUiTinyMarginTop"
                rows="3"
            
                maxLength="249"
                placeholder="{i18n>noteToAttachedInvoice}" 
                value="{invoiceModel>/Description}"
                editable="true"
                   enabled="{globalModelUserInfo>/editallowed}"
                width="100%"
                valueLiveUpdate="false"
                
                />
                <upload:UploadSet  class="sapUiTinyMarginTop"
                    id="createUploadSetOthersAttachment"
                    instantUpload="false"
                    showIcons="true"
                    uploadEnabled="{globalModelUserInfo>/editallowed}"
                    terminationEnabled="true"
                    fileTypes="txt,doc,png,pdf,xls,xlsx,docx"
                    maxFileNameLength="70"
                    maxFileSize="200"
                    mediaTypes="text/plain,application/msword,image/jpeg,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/pdf"
                    items="{path: 'invoiceItemAttachModel>/results', templateShareable: false}"
                    incompleteItems="{path: 'invoiceItemAttachInCompleteModel>/results', templateShareable: false}"
                    beforeItemAdded=".onBeforeItemAddedIT"
                    afterItemAdded=".onAfterItemAddedIT"
                    beforeItemEdited=".onBeforeItemEditedIT"
                    beforeItemRemoved=".onBeforeItemRemoveIT"
                    beforeUploadStarts=".onBeforeUploadStartsIT"
                    uploadCompleted=".onUploadCompletedIT"
                    beforeUploadTermination=".onBeforeUploadTerminationIT"
                    fileNameLengthExceeded=".onFileNameLengthExceededIT"
                    fileSizeExceeded=".onFileSizeExceededIT"
                    fileTypeMismatch=".onFileTypeMismatchIT"
                >
                    <upload:toolbar>
                        <OverflowToolbar>
                            <Title text="{i18n>otherInvoiceAttachments}" />
                            <ToolbarSpacer />
                        </OverflowToolbar>
                    </upload:toolbar>
                    <upload:incompleteItems>
                        <upload:UploadSetItem
                            fileName="{invoiceItemAttachInCompleteModel>filename}"
                            mediaType="{invoiceItemAttachInCompleteModel>mediaType}"
                            url="{invoiceItemAttachInCompleteModel>AttachURL}"
                            uploadState="{invoiceItemAttachInCompleteModel>UploadState}"
                            removePressed=".onRemoveAttachmentPressed"
                            openPressed=".onOpenAttachmentPressed"
                            visibleRemove="true"
                            visibleEdit="false"
                        />
                    </upload:incompleteItems>
                    <upload:items>
                        <upload:UploadSetItem
                            fileName="{invoiceItemAttachModel>Filename}"
                            mediaType="{invoiceItemAttachModel>Mimetype}"
                            url="{invoiceItemAttachModel>AttachURL}"
                            uploadState="{invoiceItemAttachModel>UploadState}"
                            removePressed=".onRemoveAttachmentPressed"
                            openPressed=".onOpenAttachmentPressed"
                            visibleRemove="true"
                            visibleEdit="false"
                        />
                    </upload:items>
                </upload:UploadSet>
            </VBox>
        </semantic:content>
        <semantic:messagesIndicator>
            <semantic:MessagesIndicator
                visible="{=${message>/}.length &gt; 0}"
                press="onMessagePopoverPress"
                tooltip="{i18n>messages}"
            />
        </semantic:messagesIndicator>
        <semantic:positiveAction>
            <semantic:PositiveAction
                text="{i18n>saveInvoice}"
                press=".onSaveNewInvoice"         
                  enabled="{globalModelUserInfo>/editallowed}"               
                visible="{globalModelUserInfo>/editallowed}"

            />
                <!-- enabled="{globalModelUserInfo>/bEnable}"
                visible="{= ${globalModelUserInfo>/UserType} !== '04'}" -->

        </semantic:positiveAction>
    </semantic:SemanticPage>
</mvc:View>
