<mvc:View
    xmlns:semantic="sap.f.semantic"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:f2="sap.f"
    xmlns:smartFilterBar="sap.ui.comp.smartfilterbar"
    xmlns:smartTable="sap.ui.comp.smarttable"
    xmlns:smartVariantManagement="sap.ui.comp.smartvariants"
    xmlns:core="sap.ui.core"
    xmlns:mc="sap.ui.comp.smartmicrochart"
    xmlns:tnt="sap.tnt"
    controllerName="zmmvpi01.app.z20231228mmvpi01.controller.DetailVendorInvoice"
    displayBlock="true"
    xmlns="sap.m"
    xmlns:upload="sap.m.upload"
    xmlns:form="sap.ui.layout.form"
>
    <semantic:SemanticPage
        id="detailincidentPage"
        busy="{detailVendorInvoiceViewModel>/busy}"
        busyIndicatorDelay="0"
        showFooter="true"
    >
        <semantic:titleHeading>
            <Title
                text="Číslo faktury TODO"
                level="H2"
            />
        </semantic:titleHeading>
        <semantic:titleExpandedContent>
            <Toolbar width="auto" />
        </semantic:titleExpandedContent>
        <semantic:headerContent />
        <!--Semantic ShareMenu Buttons-->
        <semantic:sendEmailAction>
            <!-- <semantic:SendEmailAction id="shareEmail" press=".onSendEmailPress"/> -->
        </semantic:sendEmailAction>

        <semantic:closeAction>
            <semantic:CloseAction
                id="closeColumn"
                press=".onCloseDetailVendorInvoicePress"
            />
        </semantic:closeAction>

        <semantic:fullScreenAction>
            <semantic:FullScreenAction
                id="enterFullScreen"
                visible="{= !${device>/system/phone} &amp;&amp; !${appView>/actionButtonsInfo/midColumn/fullScreen}}"
                press=".toggleFullScreen"
            />
        </semantic:fullScreenAction>
        <semantic:exitFullScreenAction>
            <semantic:ExitFullScreenAction
                id="exitFullScreen"
                visible="{= !${device>/system/phone} &amp;&amp; ${appView>/actionButtonsInfo/midColumn/fullScreen}}"
                press=".toggleFullScreen"
            />
        </semantic:exitFullScreenAction>
        <semantic:content>
            <VBox height="100%">
                <form:SimpleForm
                    editable="true"
                    layout="ColumnLayout"
                    columnsL="1"
                    emptySpanL="6"
                    labelSpanL="3"
                >
                    <Label
                        required="true"
                        text="Datum"
                    />
                    <DatePicker
                        minDate="{ path:'createRequestBudgetViewModel>/minDate'}"
                        maxDate="{ path:'createRequestBudgetViewModel>/maxDate'}"
                        value="{path:'newRequestModel>/ValidFrm', type: 'sap.ui.model.type.Date', formatOptions: { style: 'medium', strictParsing: true, UTC: true}}"
                        valueFormat="yyyy-MM-dd"
                        change=".onLiveChangeForDate($event,'/ValidFrm')"
                        required="true"
                    />

                    <form:content />
                </form:SimpleForm>
                <upload:UploadSet
                    beforeItemAdded=".onBeforeItemAdded"
                    afterItemAdded=".onAfterItemAdded"
                    beforeItemEdited=".onBeforeItemEdited"
                    beforeItemRemoved=".onBeforeItemRemove"
                    beforeUploadStarts=".onBeforeUploadStarts"
                    uploadCompleted=".onUploadCompleted"
                    beforeUploadTermination=".onBeforeUploadTermination"
                    fileNameLengthExceeded=".onFileNameLengthExceeded"
                    fileSizeExceeded=".onFileSizeExceeded"
                    fileTypeMismatch=".onFileTypeMismatch"
                    id="UploadSetAttachment"
                    instantUpload="false"
                    showIcons="true"
                    uploadEnabled="true"
                    terminationEnabled="true"
                    fileTypes="pdf,png"
                    maxFileNameLength="30"
                    maxFileSize="200"
                    mediaTypes="text/plain,application/msword,image/jpeg,image/png"                   
                    items="{path: 'invoiceAttachModel>/results', templateShareable: false}"
                    incompleteItems="{path: 'invoiceAttachInCompleteModel>/', templateShareable: false}"
                >
                    <upload:toolbar>
                        <OverflowToolbar>
                            <Title text="Faktura - příloha v PDF" />
                            <ToolbarSpacer />
                            <!-- <Button
                                id="uploadSelectedButton"
                                text="Upload selected"
                                press="onUploadSelectedButton"
                            />
                            <Button
                                id="downloadSelectedButton"
                                text="Download selected"
                                press="onDownloadSelectedButton"
                            /> -->
                        </OverflowToolbar>
                    </upload:toolbar>

                    <upload:incompleteItems>
                        <upload:UploadSetItem
                            fileName="{invoiceAttachInCompleteModel>filename}"
                            mediaType="{invoiceAttachInCompleteModel>mediaType}"
                            url="{invoiceAttachInCompleteModel>AttachURL}"
                            uploadState="{invoiceAttachInCompleteModel>UploadState}"
                            removePressed=".onRemoveAttachmentPressed"
                            openPressed=".onOpenAttachmentPressed"
                            visibleRemove="true"
                            visibleEdit="true"
                        />
                    </upload:incompleteItems>
                    <upload:items>
                        <upload:UploadSetItem
                            fileName="{invoiceAttachModel>Filename}"
                            mediaType="{invoiceAttachModel>Mimetype}"
                            url="{invoiceAttachModel>AttachURL}"
                            uploadState="{invoiceAttachModel>UploadState}"
                            removePressed=".onRemoveAttachmentPressed"
                            openPressed=".onOpenAttachmentPressed"
                            visibleRemove="true"
                            visibleEdit="true"
                        />
                    </upload:items>
                </upload:UploadSet>
                <upload:UploadSet
                    beforeItemAdded=".onBeforeItemAdded"
                    afterItemAdded=".onAfterItemAdded"
                    beforeItemEdited=".onBeforeItemEdited"
                    beforeItemRemoved=".onBeforeItemRemove"
                    beforeUploadStarts=".onBeforeUploadStarts"
                    uploadCompleted=".onUploadCompleted"
                    beforeUploadTermination=".onBeforeUploadTermination"
                    fileNameLengthExceeded=".onFileNameLengthExceeded"
                    fileSizeExceeded=".onFileSizeExceeded"
                    fileTypeMismatch=".onFileTypeMismatch"
                    id="UploadSetOthersAttachment"
                    instantUpload="false"
                    showIcons="true"
                    uploadEnabled="true"
                    terminationEnabled="true"
                    fileTypes="txt,doc,png,pdf,xls,xlsx.docx"
                    maxFileNameLength="30"
                    maxFileSize="200"
                    mediaTypes="text/plain,application/msword,image/jpeg"
                    items="{path: 'invoiceItemAttachModel>/results', templateShareable: false}"
                    incompleteItems="{path: 'invoiceItemAttachInCompleteModel>/', templateShareable: false}"
                >
                    <upload:toolbar>
                        <OverflowToolbar>
                            <Title text="Ostatní přílohy k faktuře - max. 5" />
                            <ToolbarSpacer />
                            <!-- <Button
                                text="Upload selected"
                                press="onUploadSelectedButton"
                            />
                            <Button
                                text="Download selected"
                                press="onDownloadSelectedButton"
                            /> -->
                        </OverflowToolbar>
                    </upload:toolbar>
                    <upload:incompleteItems>
                        <upload:UploadSetItem
                            fileName="{invoiceItemAttachInCompleteModel>filename}"
                            mediaType="{invoiceItemAttachInCompleteModel>mediaType}"
                            url="{invoiceItemAttachInCompleteModel>AttachURL}"
                            uploadState="{invoiceItemAttachInCompleteModel>UploadState}"
                            removePressed=".onRemoveAttachmentPressed"
                            openPressed=".onOpenAttachmentPressed"
                            visibleRemove="true"
                            visibleEdit="true"
                        />
                    </upload:incompleteItems>
                    <upload:items>
                        <upload:UploadSetItem
                            fileName="{invoiceItemAttachModel>Filename}"
                            mediaType="{invoiceItemAttachModel>Mimetype}"
                            url="{invoiceItemAttachModel>AttachURL}"
                             uploadState="{invoiceItemAttachModel>UploadState}"
                            removePressed=".onRemoveAttachmentPressed"
                            openPressed=".onOpenAttachmentPressed"
                            visibleRemove="true"
                            visibleEdit="true"
                        />
                    </upload:items>
                </upload:UploadSet>
            </VBox>
        </semantic:content>

        <semantic:messagesIndicator>
            <semantic:MessagesIndicator
                visible="{=${message>/}.length &gt; 0}"
                press="onMessagePopoverPress"
                tooltip="{i18n>messages}"
            />
        </semantic:messagesIndicator>
        <semantic:positiveAction>
            <semantic:PositiveAction
                text="Uložit změny"
                press=".onSaveIncidentChange"
                enabled="{incidentUserAuth>/Editinc}"
                visible="{detailVendorInvoiceViewModel>/bSaveIncidentVIS}"
            />
        </semantic:positiveAction>
    </semantic:SemanticPage>
</mvc:View>
