<mvc:View xmlns:networkgraph="sap.suite.ui.commons.networkgraph"
    xmlns:semantic="sap.f.semantic"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:f2="sap.f"
    xmlns:smartFilterBar="sap.ui.comp.smartfilterbar"
    xmlns:smartTable="sap.ui.comp.smarttable"
    xmlns:smartVariantManagement="sap.ui.comp.smartvariants"
    xmlns:core="sap.ui.core"
    xmlns:mc="sap.ui.comp.smartmicrochart"
    xmlns:tnt="sap.tnt"
    controllerName="zmmvpi01.app.z20231228mmvpi01.controller.DetailVendorInvoice"
    displayBlock="true"
    xmlns="sap.m"
    xmlns:upload="sap.m.upload"
    xmlns:form="sap.ui.layout.form"
    xmlns:custom="zmmvpi01.app.z20231228mmvpi01.control"
>
    <semantic:SemanticPage
        id="detailVendorInvociePageID"
        busy="{detailVendorInvoiceViewModel>/busy}"
        busyIndicatorDelay="0"
        showFooter="true"
    >
        <semantic:titleHeading>
            <Title
                text="{i18n>technicalID}: {invoiceModel>/Zinvoicr_Id}"
                level="H2"
            />
        </semantic:titleHeading>
        <semantic:titleExpandedContent>
            <Toolbar width="auto" />
        </semantic:titleExpandedContent>
        <semantic:headerContent />
        <!--Semantic ShareMenu Buttons-->
        <semantic:sendEmailAction>
            <!-- <semantic:SendEmailAction id="shareEmail" press=".onSendEmailPress"/> -->
        </semantic:sendEmailAction>

        <semantic:closeAction>
            <semantic:CloseAction
                id="closeColumn"
                press=".onCloseDetailVendorInvoicePress"
            />
        </semantic:closeAction>

        <semantic:fullScreenAction>
            <semantic:FullScreenAction
                id="enterFullScreen"
                visible="{= !${device>/system/phone} &amp;&amp; !${appView>/actionButtonsInfo/midColumn/fullScreen}}"
                press=".toggleFullScreen"
            />
        </semantic:fullScreenAction>
        <semantic:exitFullScreenAction>
            <semantic:ExitFullScreenAction
                id="exitFullScreen"
                visible="{= !${device>/system/phone} &amp;&amp; ${appView>/actionButtonsInfo/midColumn/fullScreen}}"
                press=".toggleFullScreen"
            />
        </semantic:exitFullScreenAction>
        <semantic:content>
            <VBox height="100%">
                <form:SimpleForm
                    editable="true"
                    layout="ColumnLayout"
                    columnsL="1"
                    emptySpanL="6"
                    labelSpanL="3"
                >

                    <Label
                        required="false"
                        text="{i18n>stateOfInvoice}"  
                    />
                    <ObjectStatus 
                    text="{ path:'invoiceModel>/StatusName'}" 
                    state="{ path:'invoiceModel>/Status', formatter : '.formatter.statusInvoiceState'}" 
                    icon="{ path:'invoiceModel>/Status', formatter : '.formatter.statusInvoiceIcon'}" />
                    <Label
                        required="false"
                        text="{i18n>createdBy}"
                    />
                    <Text text="{ path:'invoiceModel>/Ernam'}" />
                    <Label
                        required="false"
                        text="{i18n>createdOn}"
                    />
                    <Text
                        text="{ path:'invoiceModel>/Erdat', type: 'sap.ui.model.type.Date', formatOptions: { style: 'medium', strictParsing: true, UTC: true}}"
                    />

                    <form:content />
                </form:SimpleForm>

                <upload:UploadSet
                    beforeItemAdded=".onBeforeItemAdded"
                    afterItemAdded=".onAfterItemAdded"
                    beforeItemEdited=".onBeforeItemEdited"
                    beforeItemRemoved=".onBeforeItemRemove"
                    beforeUploadStarts=".onBeforeUploadStarts"
                    uploadCompleted=".onUploadCompleted"
                    beforeUploadTermination=".onBeforeUploadTermination"
                    fileNameLengthExceeded=".onFileNameLengthExceeded"
                    fileSizeExceeded=".onFileSizeExceeded"
                    fileTypeMismatch=".onFileTypeMismatch"
                    id="uploadSetAttachment"
                    instantUpload="false"
                    showIcons="true"
                     uploadEnabled="{userTypeStatusModel>/Editallowed}"
                    terminationEnabled="true"
                    fileTypes="pdf"
                    maxFileNameLength="70"
                    maxFileSize="10"
                    mediaTypes="application/pdf"
                    items="{path: 'invoiceAttachModel>/results', templateShareable: false}"
                    incompleteItems="{path: 'invoiceAttachInCompleteModel>/results', templateShareable: false}"
                >
                    <!-- uploadEnabled="{ path:'invoiceModel>/Status', formatter : '.formatter.statusInvoiceUploadEnabled'}" -->
                    <upload:toolbar>
                        <OverflowToolbar>
                            <Title
                                text="{i18n>invoicePDFAttachmentOnly1Attachment}"
                            />
                            <ToolbarSpacer />
 
                        </OverflowToolbar>
                    </upload:toolbar>

                    <upload:incompleteItems>
                        <upload:UploadSetItem
                            fileName="{invoiceAttachInCompleteModel>filename}"
                            mediaType="{invoiceAttachInCompleteModel>mediaType}"
                            url="{invoiceAttachInCompleteModel>AttachURL}"
                            uploadState="{invoiceAttachInCompleteModel>UploadState}"
                            removePressed=".onRemoveAttachmentPressed"
                            openPressed=".onOpenAttachmentPressed"
                            visibleRemove="true"
                            visibleEdit="true"
                            enabledRemove="true"
                            enabledEdit="true"
                        />
                    </upload:incompleteItems>
                    <upload:items>
                        <upload:UploadSetItem
                            fileName="{invoiceAttachModel>Filename}"
                            mediaType="{invoiceAttachModel>Mimetype}"
                            url="{invoiceAttachModel>AttachURL}"
                            uploadState="{invoiceAttachModel>UploadState}"
                            removePressed=".onRemoveAttachmentPressed"
                            openPressed=".onOpenAttachmentPressed"
                            visibleRemove="true"
                            visibleEdit="true"
                            enabledRemove="true"
                            enabledEdit="true"
                        />
                    </upload:items>
                </upload:UploadSet>

                <TextArea class="sapUiTinyMarginTop"
                rows="3"
            
                maxLength="249"
                placeholder="{i18n>noteToAttachedInvoice}"
                value="{invoiceModel>/Description}"
                editable="true"
                 enabled="{userTypeStatusModel>/Editallowed}"
                width="100%"
                valueLiveUpdate="false"
                
                />
                <!-- editable="{ path:'invoiceModel>/Status', formatter : '.formatter.statusInvoiceUploadEnabled'}" -->

                <!-- </upload:UploadSet> -->
                <upload:UploadSet  class="sapUiTinyMarginTop"
                    beforeItemAdded=".onBeforeItemAddedIT"
                    afterItemAdded=".onAfterItemAddedIT"
                    beforeItemEdited=".onBeforeItemEditedIT"
                    beforeItemRemoved=".onBeforeItemRemoveIT"
                    beforeUploadStarts=".onBeforeUploadStartsIT"
                    uploadCompleted=".onUploadCompletedIT"
                    beforeUploadTermination=".onBeforeUploadTerminationIT"
                    fileNameLengthExceeded=".onFileNameLengthExceededIT"
                    fileSizeExceeded=".onFileSizeExceededIT"
                    fileTypeMismatch=".onFileTypeMismatchIT"
                    id="uploadSetOthersAttachment"
                    instantUpload="false"
                    showIcons="true"
                    uploadEnabled="{userTypeStatusModel>/Editallowed}"
                    terminationEnabled="true"
                    fileTypes="txt,doc,png,pdf,xls,xlsx,docx,csv,jpg,jpeg"
                    maxFileNameLength="70"
                    maxFileSize="10"
                    mediaTypes="text/plain,application/msword,image/jpeg,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/pdf"
                    items="{path: 'invoiceItemAttachModel>/results', templateShareable: false}"
                    incompleteItems="{path: 'invoiceItemAttachInCompleteModel>/results', templateShareable: false}"
                >
                    <!-- uploadEnabled="{ path:'invoiceModel>/Status', formatter : '.formatter.statusInvoiceUploadEnabled'}" -->
                    <upload:toolbar>
                        <OverflowToolbar>
                            <Title text="{i18n>otherInvoiceAttachments}" />
                            <ToolbarSpacer />
                            <!-- <Button
                                text="Upload selected"
                                press="onUploadSelectedButton"
                            />
                            <Button
                                text="Download selected"
                                press="onDownloadSelectedButton"
                            /> -->
                        </OverflowToolbar>
                    </upload:toolbar>
                    <upload:incompleteItems>
                        <upload:UploadSetItem
                            fileName="{invoiceItemAttachInCompleteModel>filename}"
                            mediaType="{invoiceItemAttachInCompleteModel>mediaType}"
                            url="{invoiceItemAttachInCompleteModel>AttachURL}"
                            uploadState="{invoiceItemAttachInCompleteModel>UploadState}"
                            removePressed=".onRemoveAttachmentPressedIT"
                            openPressed=".onOpenAttachmentPressedIT"
                            visibleRemove="true"
                            visibleEdit="true"
                            enabledRemove="true"
                            enabledEdit="true"
                        />
                    </upload:incompleteItems>
                    <upload:items>
                        <upload:UploadSetItem
                            fileName="{invoiceItemAttachModel>Filename}"
                            mediaType="{invoiceItemAttachModel>Mimetype}"
                            url="{invoiceItemAttachModel>AttachURL}"
                            uploadState="{invoiceItemAttachModel>UploadState}"
                            removePressed=".onRemoveAttachmentPressedIT"
                            openPressed=".onOpenAttachmentPressedIT"
                            visibleRemove="true"
                            visibleEdit="true"
                            enabledRemove="true"
                            enabledEdit="true"
                        />
                    </upload:items>
                </upload:UploadSet>

                <!-- <UploadCollection
                    id="UploadCollection"
                    maximumFilenameLength="30"
                    maximumFileSize="200"
                    multiple="true"
                    change="onChange"
                    fileDeleted="onFileDeleted"
                    filenameLengthExceed="onFilenameLengthExceed"
                    fileRenamed="onFileRenamed"
                    fileSizeExceed="onFileSizeExceed"
                    fileType="pdf,png"
                    selectionChange="onSelectionChange"
                    typeMissmatch="onTypeMissmatch"
                    uploadComplete="onUploadComplete"
                    beforeUploadStarts="onBeforeUploadStarts"
                    uploadTerminated="onUploadTerminated"
                    items="{path: 'invoiceAttachModel>/results', templateShareable: false}"
                    numberOfAttachmentsText="Uploaded (8)"
                    showSeparators="{settings>/showSeparators}"
                    uploadEnabled="true"
                    instantUpload="false"
                    uploadButtonInvisible="{=!${settings>/uploadButtonVisible}}"
                    mode="MultiSelect"
                >
                    <toolbar>
                        <OverflowToolbar id="myId">
                            <Title id="attachmentTitle" text="Faktura - příloha v PDF (lze nahrát jen 1 přílohu v pdf formátu)
" />
                            <ToolbarSpacer />
                            <UploadCollectionToolbarPlaceholder />
                        </OverflowToolbar>
                    </toolbar>
                    <items>
                        <UploadCollectionItem
                            documentId="{documentId}"
                            fileName="{invoiceAttachModel>Filename}"
                            mimeType="{invoiceAttachModel>Mimetype}"
                            thumbnailUrl="{thumbnailUrl}"
                            url="{invoiceAttachModel>AttachURL}"
                            enableEdit="true"
                            enableDelete="true"
                            visibleDelete="true"
                            visibleEdit="true"                         
                        >
 
                        </UploadCollectionItem>
                    </items>
                </UploadCollection> -->
            </VBox>
        </semantic:content>

        <semantic:messagesIndicator>
            <semantic:MessagesIndicator
                visible="{=${message>/}.length &gt; 0}"
                press="onMessagePopoverPress"
                tooltip="{i18n>messages}"
            />
        </semantic:messagesIndicator>
        <semantic:positiveAction>
            <semantic:PositiveAction
                text="{i18n>saveChanges}"
                press=".onSaveInvoiceChange"
                enabled="{userTypeStatusModel>/Editallowed}"               
                 visible="{globalModelHelp>/bVISInApp}"
            />
                <!-- visible="{= ${globalModelUserInfo>/UserType} !== '04'}" -->
                <!-- enabled="{= ${invoiceModel>/Status} === '1' || ${invoiceModel>/Status} === '9'}" -->
                <!-- enabled="{= ${invoiceModel>/Status} === '1' || ${invoiceModel>/Status} === '9'}" -->
                <!-- visible="{ parts: [  'invoiceModel>/Status','{globalModelUserInfo>/UserType}'], formatter: '.formatter.visibleSaveButton' }" -->

           
                <!-- visible="{ path:'invoiceModel>/Status', formatter : '.formatter.statusInvoiceUploadEnabled'}" -->
        </semantic:positiveAction>

        <semantic:footerMainAction>
            <!-- <semantic:FooterMainAction
                text="TestPřílohy"
                press=".onTestAttach"
            /> -->
        </semantic:footerMainAction>
    </semantic:SemanticPage>
</mvc:View>
