<mvc:View
    xmlns:semantic="sap.f.semantic"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:f2="sap.f"
    xmlns:commons="sap.suite.ui.commons"
    xmlns:smartFilterBar="sap.ui.comp.smartfilterbar"
    xmlns:smartTable="sap.ui.comp.smarttable"
    xmlns:smartVariantManagement="sap.ui.comp.smartvariants"
    xmlns:core="sap.ui.core"
    xmlns:mc="sap.ui.comp.smartmicrochart"
    xmlns:tnt="sap.tnt"
    controllerName="zmmvpi01.app.z20231228mmvpi01.controller.OverViewVendorInvoice"
    displayBlock="true"
    xmlns="sap.m"
>
    <semantic:SemanticPage
        id="overviewinvoicePage"
        preserveHeaderStateOnScroll="true"
        toggleHeaderOnTitleClick="false"
        showFooter="true"
                busy="{vendorInvoiceOverViewModel>/busy}"
        busyIndicatorDelay="0"
    >
        <semantic:titleHeading>
            <Title
                id="masterPageTitle"
                text="Přehled faktur dodavatele"
                level="H2"
            />
        </semantic:titleHeading>
        <semantic:headerContent>
            <smartVariantManagement:SmartVariantManagement
                id="pageVariantIdInc"
                persistencyKey="PageVariantPKey"
            />
            <smartFilterBar:SmartFilterBar
                id="smartFilterBarInc"
                initialized=".onSFBInitialized"
                smartVariant="pageVariantIdInc"
                entitySet="ZC_Invoice"
                persistencyKey="SmartFilterPKey"
            />
        </semantic:headerContent>
        <semantic:titleExpandedHeading />
        <semantic:titleExpandedContent>
            <Toolbar width="auto">
                <content>
                    <f2:Avatar
                        displaySize="XS"
                        displayShape="Circle"
                        src="sap-icon://person-placeholder"
                        backgroundColor="Accent6"
                    />
                    <!-- <f2:Avatar displaySize="{globalModelUserInfo>/Avatarsize}" displayShape="{globalModelUserInfo>/Avatarshape}" src="{globalModelUserInfo>/Avataricon}" backgroundColor="{globalModelUserInfo>/Avatarcolor}"/> -->

                    <!-- <Text text="{globalModelHelp>/sInfoLabel}"/> -->
                    <Text text="Uživatel: {globalModelUserInfo>/FullName}" />
                    <Text text="Dodavatel: {globalModelUserInfo>/Lifnr} {globalModelUserInfo>/LifnrName}" />
                    <!-- <tnt:InfoLabel text="{path:'globalModelHelp>/sInfoLabel'}" renderMode="Loose" colorScheme="{path : 'globalModelAuthorization>/Colorlabel', formatter : '.formatter.colorlabel'}" displayOnly="true"/> -->
                    <ToolbarSpacer />
                    <Button press=".onDeleteCookie" type="Emphasized" visible="{globalModelUserInfo>/bLogonEbeln}" text="{i18n>changeOrder}"></Button>
                </content>
            </Toolbar>
        </semantic:titleExpandedContent>
        <semantic:content>
            <VBox
                width="100%"
                direction="Column"
            >
                <items>
                    <smartTable:SmartTable
                        id="smartTableInvoiceID"
                        smartVariant="pageVariantIdInc"
                        entitySet="ZC_Invoice"
                        showFullScreenButton="true"
                        smartFilterId="smartFilterBarInc"
                        useExportToExcel="true"
                        beforeExport="onBeforeExport"
                        useVariantManagement="true"
                        useTablePersonalisation="true"
                        header="Seznam faktur"
                        showRowCount="true"
                        beforeRebindTable="onBind"
                        persistencyKey="SmartTableRefApp_Explored"
                        enableAutoBinding="false"
                        tableType="ResponsiveTable"
                        demandPopin="true"
                        paste="onPaste"
                        requestAtLeastFields="Zinvoicr_Id,Lifnr"
                        
                    >
                        <!-- http://www.ut163.com/sapui5/docs/topics/bed8274140d04fc0b9bcb2db42d8bac2.html -->

                        <smartTable:customToolbar>
                            <OverflowToolbar design="Transparent">
                                <ToolbarSpacer />

                                <OverflowToolbarButton
                                    text="Nová příloha"
                                    type="Emphasized"
                                    icon="sap-icon://attachment"
                                    press=".onNewInvoiceAttachCreatePressed"
                                    enabled="{globalModelUserInfo>/bEnable}"
                                />
                            </OverflowToolbar>
                        </smartTable:customToolbar>
                        <Table
                            fixedLayout="false"
                            growing="true"
                            sticky="ColumnHeaders"
                            growingThreshold="20"
                            rememberSelections="true"
                            mode="SingleSelectMaster"
                            itemPress=".onDetailVendorInvoice"
                            
                        >
                            <columns>
                                <Column
                                    width="6rem"
                                    hAlign="Begin"
                                >
                                    <customData>
                                        <core:CustomData
                                            key="p13nData"
                                            value='\{"columnKey": "Ernam", "maxLength": "30","columnIndex":"1",  "sortProperty": "Ernam",  "filterProperty": "Ernam","leadingProperty": "Ernam" }'
                                        />
                                    </customData>
                                    <Text
                                        text="Založil"
                                        wrapping="false"
                                    />
                                </Column>
                                <Column
                                    width="6rem"
                                    hAlign="Begin"
                                >
                                    <customData>
                                        <core:CustomData
                                            key="p13nData"
                                            value='\{"columnKey": "Erdat", "maxLength": "30", "columnIndex":"2","sortProperty": "Erdat",  "filterProperty": "Erdat", "leadingProperty": "Erdat"}'
                                        />
                                    </customData>
                                    <Text
                                        text="Datum založení"
                                        wrapping="false"
                                    />
                                </Column>
                                <Column
                                    width="6rem"
                                    hAlign="Begin"
                                >
                                    <customData>
                                        <core:CustomData
                                            key="p13nData"
                                            value='\{"columnKey": "Rmwwr", "maxLength": "30", "columnIndex":"3","sortProperty": "Rmwwr",  "filterProperty": "Rmwwr", "leadingProperty": "Rmwwr"}'
                                        />
                                    </customData>
                                    <Text
                                        text="OCR - Částka v měně dokladu"
                                        wrapping="false"
                                    />
                                </Column>
                                <Column
                                    width="6rem"
                                    hAlign="Begin"
                                >
                                    <customData>
                                        <core:CustomData
                                            key="p13nData"
                                            value='\{"columnKey": "Wmwst", "maxLength": "30", "columnIndex":"4","sortProperty": "Wmwst",  "filterProperty": "Wmwst", "leadingProperty": "Wmwst"}'
                                        />
                                    </customData>
                                    <Text
                                        text="OCR - Částka daně v měně dokladu"
                                        wrapping="false"
                                    />
                                </Column>

                                <Column
                                    width="13rem"
                                    hAlign="Begin"
                                >
                                    <customData>
                                        <core:CustomData
                                            key="p13nData"
                                            value='\{"columnKey": "Status", "maxLength": "30","columnIndex":"20",  "sortProperty": "Status",  "filterProperty": "Status", "leadingProperty": "Status"}'
                                        />
                                    </customData>
                                    <Text
                                        text="Status faktury"
                                        wrapping="false"
                                    />
                                </Column>
                            </columns>

                            <items>
                                <ColumnListItem
                                    type="Navigation"
                                    press="onDetailVendorInvoice"
                                >
                                    <cells>
                                        <Text text="{Ernam}" />
                                        <Text
                                            text="{path: 'Erdat' ,type: 'sap.ui.model.type.Date', formatOptions: { style: 'medium', strictParsing: true}}"
                                        />
                                        <Text
                                            text="{path: 'Rmwwr' , formatter : '.formatter.currencyValue'}"
                                        />   
                                        <Text
                                            text="{path: 'Wmwst' , formatter : '.formatter.currencyValue'}"
                                        />                                         
                                        <commons:MicroProcessFlow>
                                            <commons:content>
                                                <commons:MicroProcessFlowItem
                                                                                                  
                                             
                                                    title="{ parts: [  'globalModelStatusName>/results','Status'], formatter: '.formatter.statusInvoiceStateName1' }"
                                                    state="{path : 'Status', formatter : '.formatter.statusInvoiceState1'}"
                                                    icon="sap-icon://account"
                                                />
                                                <!-- state="Success" -->
                                                <commons:MicroProcessFlowItem
                                               
                                                    title="{ parts: [  'globalModelStatusName>/results','Status'], formatter: '.formatter.statusInvoiceStateName2' }"
                                                 
                                                    state="{path : 'Status', formatter : '.formatter.statusInvoiceState2'}"
                                                    icon="sap-icon://account"
                                                />
                                                <commons:MicroProcessFlowItem
                                                 
                                                    title="{ parts: [  'globalModelStatusName>/results','Status'], formatter: '.formatter.statusInvoiceStateName3' }"
                                             
                                                    state="{path : 'Status', formatter : '.formatter.statusInvoiceState3'}"
                                                    icon="sap-icon://account"
                                                />
                                                <commons:MicroProcessFlowItem
                                                 
                                                    title="{ parts: [  'globalModelStatusName>/results','Status'], formatter: '.formatter.statusInvoiceStateName4' }"
                                             
                                                    state="{path : 'Status', formatter : '.formatter.statusInvoiceState4'}"
                                                    icon="sap-icon://account"
                                                />
                                                <commons:MicroProcessFlowItem
                                                
                                                    title="{ parts: [  'globalModelStatusName>/results','Status'], formatter: '.formatter.statusInvoiceStateName5' }"
                                             
                                                    state="{path : 'Status', formatter : '.formatter.statusInvoiceState5'}"
                                                    icon="sap-icon://cancel"
                                                />
                                            </commons:content>
                                        </commons:MicroProcessFlow>
                                    </cells>
                                </ColumnListItem>
                            </items>
                        </Table>
                    </smartTable:SmartTable>
                </items>
            </VBox>
        </semantic:content>
        <semantic:messagesIndicator>
            <semantic:MessagesIndicator
                visible="{=${message>/}.length &gt; 0}"
                press="onMessagePopoverPress"
                tooltip="{i18n>messages}"
            />
        </semantic:messagesIndicator>
    </semantic:SemanticPage>
</mvc:View>
