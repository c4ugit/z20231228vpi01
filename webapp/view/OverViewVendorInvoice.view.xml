<mvc:View
    xmlns:semantic="sap.f.semantic"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:f2="sap.f"
    xmlns:commons="sap.suite.ui.commons"
    xmlns:smartFilterBar="sap.ui.comp.smartfilterbar"
    xmlns:smartTable="sap.ui.comp.smarttable"
    xmlns:smartVariantManagement="sap.ui.comp.smartvariants"
    xmlns:core="sap.ui.core"
    xmlns:mc="sap.ui.comp.smartmicrochart"
    xmlns:tnt="sap.tnt"
    controllerName="zmmvpi01.app.z20231228mmvpi01.controller.OverViewVendorInvoice"
    displayBlock="true"
    xmlns="sap.m"
>
    <semantic:SemanticPage
        id="overviewinvoicePage"
        preserveHeaderStateOnScroll="true"
        toggleHeaderOnTitleClick="false"
        showFooter="true"
        busy="{vendorInvoiceOverViewModel>/busy}"
        busyIndicatorDelay="0"
    >
        <semantic:titleHeading>
            <Title
                id="masterPageTitle"
                text="Přehled faktur dodavatele"
                level="H2"
            />
        </semantic:titleHeading>
        <semantic:headerContent>
            <smartVariantManagement:SmartVariantManagement
                id="pageVariantIdInc"
                persistencyKey="PageVariantPKey"
                enabled="{globalModelUserInfo>/variantmanag}"
            />
            <smartFilterBar:SmartFilterBar
                id="smartFilterBarInc"
                initialized=".onSFBInitialized"
                smartVariant="pageVariantIdInc"
                entitySet="ZC_Invoice"
                persistencyKey="SmartFilterPKey"
                
            />
              <MessageStrip  showCloseButton="true" visible="{globalModelInfoForUser>/Bfooterdisplay}" 
                showIcon="true" type="{globalModelInfoForUser>/Footermessagetype}" text="{globalModelInfoForUser>/Footertext}"/>
        </semantic:headerContent>
        <semantic:titleExpandedHeading />
        <semantic:titleExpandedContent>
            <Toolbar width="auto">
                <content>
                    <f2:Avatar
                        displaySize="XS"
                        displayShape="Circle"
                        src="sap-icon://person-placeholder"
                        backgroundColor="Accent6"
                    />
                    <!-- <f2:Avatar displaySize="{globalModelUserInfo>/Avatarsize}" displayShape="{globalModelUserInfo>/Avatarshape}" src="{globalModelUserInfo>/Avataricon}" backgroundColor="{globalModelUserInfo>/Avatarcolor}"/> -->

                    <!-- <Text text="{globalModelHelp>/sInfoLabel}"/> -->
                    <Text text="Uživatel: {globalModelUserInfo>/FullName}" />
                    <Text text="Dodavatel: {globalModelUserInfo>/Lifnr} {globalModelUserInfo>/LifnrName}" />
                    <!-- <tnt:InfoLabel text="{path:'globalModelHelp>/sInfoLabel'}" renderMode="Loose" colorScheme="{path : 'globalModelAuthorization>/Colorlabel', formatter : '.formatter.colorlabel'}" displayOnly="true"/> -->
                    <ToolbarSpacer />
                    <Button press=".onDeleteCookie" type="Emphasized" visible="{globalModelUserInfo>/bLogonEbeln}" text="{i18n>changeOrder}"></Button>
                </content>
            </Toolbar>
        </semantic:titleExpandedContent>
        <semantic:content>
            <VBox
                width="100%"
                direction="Column"
            >
                <items>
              
                
                    <smartTable:SmartTable
                        id="smartTableInvoiceID"
                        smartVariant="pageVariantIdInc"
                        entitySet="ZC_Invoice"
                        showFullScreenButton="true"
                        smartFilterId="smartFilterBarInc"
                        useExportToExcel="true"
                        beforeExport="onBeforeExport"
                        useVariantManagement="true"
                        useTablePersonalisation="true"
                        header="Seznam faktur"
                        showRowCount="true"
                        beforeRebindTable="onBind"
                        persistencyKey="SmartTableRefApp_Explored"
                        enableAutoBinding="false"
                        tableType="ResponsiveTable"
                        demandPopin="true"
                        paste="onPaste"
                        requestAtLeastFields="Zinvoicr_Id,Lifnr"
                        showTablePersonalisation="{globalModelUserInfo>/tableperson}"
                        
                    >
                        <!-- http://www.ut163.com/sapui5/docs/topics/bed8274140d04fc0b9bcb2db42d8bac2.html -->

                        <smartTable:customToolbar>
                            <OverflowToolbar design="Transparent">
                                <ToolbarSpacer />

                                <OverflowToolbarButton
                                    text="Nová příloha"
                                    type="Emphasized"
                                    icon="sap-icon://attachment"
                                    press=".onNewInvoiceAttachCreatePressed"
                                    enabled="{globalModelUserInfo>/bEnable}"
                                />
                                <OverflowToolbarButton
                                    text="Nápověda"
                                    type="Default"
                                    icon="sap-icon://hint"
                                    press=".onPressOpenHelpForUser"
                                    enabled="true"
                                    visible="{globalModelUserInfo>/helpforuser}"
                                />
                            </OverflowToolbar>
                        </smartTable:customToolbar>
                        <Table
                            fixedLayout="false"
                            growing="true"
                            sticky="ColumnHeaders"
                            growingThreshold="20"
                            rememberSelections="true"
                            mode="SingleSelectMaster"
                            itemPress=".onDetailVendorInvoice"
                        >
                            <columns>
                                <Column width="6rem"     hAlign="Begin">
                                    <customData>
                                        <core:CustomData
                                            key="p13nData"
                                            value='\{"columnKey": "Erdat", "maxLength": "30", "columnIndex":"10","sortProperty": "Erdat",  "filterProperty": "Erdat", "leadingProperty": "Erdat", "type":"date"}'
                                        />
                                    </customData>
                                    <Text
                                        text="Datum založení"
                                        wrapping="false"
                                    />
                                </Column>
                                <Column width="6rem"     hAlign="Begin">
                                    <customData>
                                        <core:CustomData
                                            key="p13nData"
                                            value='\{"columnKey": "Erzet", "maxLength": "30", "columnIndex":"15","sortProperty": "Erzet",  "filterProperty": "Erzet", "leadingProperty": "Erzet", "type":"time"}'
                                        />
                                    </customData>
                                    <Text
                                        text="Čas založení"
                                        wrapping="false"
                                    />
                                </Column>

                                <Column width="6rem"      hAlign="Begin">
                                    <customData>
                                        <core:CustomData
                                            key="p13nData"
                                            value='\{"columnKey": "Bldat", "maxLength": "30","columnIndex":"20","sortProperty": "Bldat",  "filterProperty": "Bldat","leadingProperty": "Bldat", "type":"date" }'
                                        />
                                    </customData>
                                    <Text
                                        text="Datum dokladu"
                                        wrapping="false"
                                    />
                                </Column>
                                <Column width="8rem"
                                 hAlign="Begin"
                                >
                                    <customData>
                                        <core:CustomData
                                            key="p13nData"
                                            value='\{"columnKey": "Rmwwr", "maxLength": "30", "columnIndex":"30","sortProperty": "Rmwwr",  "filterProperty": "Rmwwr", "leadingProperty": "Rmwwr"}'
                                        />
                                    </customData>
                                    <!-- •	Částka v měně dokladu – zalomit za měně -->
                                    <Text
                                        text="Částka v měně dokladu"
                                        wrapping="true"
                                    />
                                </Column>
                                <Column width="8rem"
                                hAlign="Begin"
                                >
                                    <customData>
                                    <!-- •	Částka daně v měně dokladu – zalomit za daně -->
                                        <core:CustomData
                                            key="p13nData"
                                            value='\{"columnKey": "Wmwst", "maxLength": "30", "columnIndex":"40","sortProperty": "Wmwst",  "filterProperty": "Wmwst", "leadingProperty": "Wmwst"}'
                                        />
                                    </customData>
                                    <Text
                                        text="Částka daně v měně dokladu"
                                        wrapping="true"
                                    />
                                </Column>
                                <Column width="3rem"
                                hAlign="Begin"
                                >
                                    <customData>
                                        <core:CustomData
                                            key="p13nData"
                                            value='\{"columnKey": "Waers", "maxLength": "30", "columnIndex":"50","sortProperty": "Waers",  "filterProperty": "Waers", "leadingProperty": "Waers"}'
                                        />
                                    </customData>
                                    <Text
                                        text="Měna"
                                        wrapping="false"
                                    />
                                </Column>
                                <Column width="6rem"
                                hAlign="Begin"
                                >
                                    <customData>
                                        <core:CustomData
                                            key="p13nData"
                                            value='\{"columnKey": "Xblnr", "maxLength": "30", "columnIndex":"60","sortProperty": "Xblnr",  "filterProperty": "Xblnr", "leadingProperty": "Xblnr"}'
                                        />
                                    </customData>
                                    <Text
                                        text="Č.ref.dokladu"
                                        wrapping="false"
                                    />
                                </Column>
                                <!-- <Column width="8rem"
                                hAlign="Begin"
                                >
                                    <customData>
                                        <core:CustomData
                                            key="p13nData"
                                            value='\{"columnKey": "Belnr", "maxLength": "30", "columnIndex":"61","sortProperty": "Belnr",  "filterProperty": "Belnr", "leadingProperty": "Belnr"}'
                                        />
                                    </customData>
                                    <Text
                                        text="Předběžně pořízený doklad"
                                        wrapping="true"
                                    />
                                </Column> -->
                                <!-- <Column width="8rem"
                                hAlign="Begin"
                                >
                                    <customData>
                                        <core:CustomData
                                            key="p13nData"
                                            value='\{"columnKey": "Lifnr", "maxLength": "30", "columnIndex":"62","sortProperty": "Lifnr",  "filterProperty": "Lifnr", "leadingProperty": "Lifnr"}'
                                        />
                                    </customData>
                                    <Text
                                        text="Dodavatel"
                                        wrapping="true"
                                    />
                                </Column> -->
                                <!-- <Column width="12rem"
                                hAlign="Begin"
                                >
                                    <customData>
                                        <core:CustomData
                                            key="p13nData"
                                            value='\{"columnKey": "BusinessPartnerName", "maxLength": "30", "columnIndex":"63","sortProperty": "BusinessPartnerName",  "filterProperty": "BusinessPartnerName", "leadingProperty": "BusinessPartnerName"}'
                                        />
                                    </customData>
                                    <Text
                                        text="Název dodavatele"
                                        wrapping="true"
                                    />
                                </Column> -->
                                <Column width="25rem"
                                hAlign="Begin"
                                >
                                    <customData>
                                        <core:CustomData
                                            key="p13nData"
                                            value='\{"columnKey": "Sgtxt", "maxLength": "30", "columnIndex":"70","sortProperty": "Sgtxt",  "filterProperty": "Sgtxt", "leadingProperty": "Sgtxt"}'
                                        />
                                    </customData>
                                    <Text
                                        text="Text"
                                        wrapping="false"
                                    />
                                </Column>
                                <Column width="25rem"
                                hAlign="Begin"
                                >
                                    <customData>
                                        <core:CustomData
                                            key="p13nData"
                                            value='\{"columnKey": "Description", "maxLength": "30", "columnIndex":"80","sortProperty": "Description",  "filterProperty": "Description", "leadingProperty": "Description"}'
                                        />
                                    </customData>
                                    <Text
                                        text="Poznámka"
                                        wrapping="false"
                                    />
                                </Column>

                                <Column width="13rem"
                                hAlign="Begin">
                                    <customData>
                                        <core:CustomData
                                            key="p13nData"
                                            value='\{"columnKey": "Status", "maxLength": "30","columnIndex":"200",  "sortProperty": "Status",  "filterProperty": "Status", "leadingProperty": "Status"}'
                                        />
                                    </customData>
                                    <Text
                                        text="Status faktury"
                                        wrapping="false"
                                    />
                                </Column>
                            </columns>

                            <items>
                                <ColumnListItem
                                    type="Navigation"
                                    press="onDetailVendorInvoice"
                                >
                                    <cells>
                                        <!-- <Text text="{Ernam}" /> -->
                                        <Text
                                            text="{path: 'Erdat' ,type: 'sap.ui.model.type.Date', formatOptions: { style: 'medium', strictParsing: true}}"
                                        />
                                        <Text
                                            text="{path: 'Erzet' ,formatter: '.formatter.dateTimeDisp'}"
                                        />
                                        <Text
                                            text="{path: 'Bldat' ,type: 'sap.ui.model.type.Date', formatOptions: { style: 'medium', strictParsing: true}}"
                                        />
                                        <HBox justifyContent="End" >
                                        <Text
                                           text="{path: 'Rmwwr' , formatter : '.formatter.currencyValue'}"
                                        />                                        
                                        </HBox>
                                            <HBox justifyContent="End" >
                                        <Text
                                             text="{path: 'Wmwst' , formatter : '.formatter.currencyValue'}"
                                        />
                                           </HBox>
                                        <Text
                                            text="{path: 'Waers' }"
                                        />
                                        <Text
                                            text="{path: 'Xblnr' }"
                                        />
                                        <!-- <Text
                                            text="{path: 'Belnr' }"
                                        />
                                        <Text
                                            text="{path: 'Lifnr' }"
                                        />
                                        <Text
                                            text="{path: 'BusinessPartnerName' }"
                                        /> -->
                                        <Text
                                            text="{path: 'Sgtxt' }"
                                        />
                                        <Text
                                            text="{path: 'Description' }"
                                        />
                                        <commons:MicroProcessFlow>
                                            <commons:content>
                                                <commons:MicroProcessFlowItem
                                                    title="{ parts: [  'globalModelStatusName>/results','Status'], formatter: '.formatter.statusInvoiceStateName1' }"
                                                    state="{path : 'Status', formatter : '.formatter.statusInvoiceState1'}"
                                                    icon="sap-icon://initiative"
                                                />
                                                <!-- state="Success" -->
                                                <commons:MicroProcessFlowItem
                                                    title="{ parts: [  'globalModelStatusName>/results','Status'], formatter: '.formatter.statusInvoiceStateName2' }"
                                                    state="{path : 'Status', formatter : '.formatter.statusInvoiceState2'}"
                                                    icon="sap-icon://locked"
                                                />
                                                <commons:MicroProcessFlowItem
                                                    title="{ parts: [  'globalModelStatusName>/results','Status'], formatter: '.formatter.statusInvoiceStateName3' }"
                                                    state="{path : 'Status', formatter : '.formatter.statusInvoiceState3'}"
                                                    icon="sap-icon://performance"
                                                />
                                                <commons:MicroProcessFlowItem
                                                    title="{ parts: [  'globalModelStatusName>/results','Status'], formatter: '.formatter.statusInvoiceStateName4' }"
                                                    state="{path : 'Status', formatter : '.formatter.statusInvoiceState4'}"
                                                    icon="sap-icon://pending"
                                                />
                                                <commons:MicroProcessFlowItem
                                                    title="{ parts: [  'globalModelStatusName>/results','Status'], formatter: '.formatter.statusInvoiceStateName5' }"
                                                    state="{path : 'Status', formatter : '.formatter.statusInvoiceState5'}"
                                                    icon="sap-icon://lead"
                                                />
                                            </commons:content>
                                        </commons:MicroProcessFlow>
                                    </cells>
                                </ColumnListItem>
                            </items>
                        </Table>
                    </smartTable:SmartTable>
                </items>
            </VBox>
        </semantic:content>
        <semantic:messagesIndicator>
            <semantic:MessagesIndicator
                visible="{=${message>/}.length &gt; 0}"
                press="onMessagePopoverPress"
                tooltip="{i18n>messages}"
            />
        </semantic:messagesIndicator>
    </semantic:SemanticPage>
</mvc:View>
